(function(a){if(!a.event.special.destroyed){a.event.special.destroyed={remove:function(b){if(b.handler){b.handler()}}}}a.fn.extend({maxlength:function(l,b){var e=a("body"),d={showOnReady:false,alwaysShow:false,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important label-danger",separator:" / ",preText:"",postText:"",showMaxLength:true,placement:"bottom",message:null,showCharsTyped:true,validate:false,utf8:false,appendToParent:false,twoCharLinebreak:true,customMaxAttribute:null,allowOverMax:false};if(a.isFunction(l)&&!b){b=l;l={}}l=a.extend(d,l);function i(u){var v=u.val();if(l.twoCharLinebreak){v=v.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n")}else{v=v.replace(new RegExp("\r?\n","g"),"\n")}var t=0;if(l.utf8){t=s(v)}else{t=v.length}return t}function q(t,u){var w=t.val();var v=0;if(l.twoCharLinebreak){w=w.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n");if(w.substr(w.length-1)==="\n"&&w.length%2===1){v=1}}t.val(w.substr(0,u-v))}function s(v){var w=0;for(var u=0;u<v.length;u++){var t=v.charCodeAt(u);if(t<128){w++}else{if((t>127)&&(t<2048)){w=w+2}else{w=w+3}}}return w}function c(t,w,u){var v=true;if(!l.alwaysShow&&(u-i(t)>w)){v=false}return v}function o(t,v){var u=v-i(t);return u}function p(t,u){u.css({display:"block"});t.trigger("maxlength.shown")}function h(t,u){if(l.alwaysShow){return}u.css({display:"none"});t.trigger("maxlength.hidden")}function r(t,u,w){var v="";if(l.message){if(typeof l.message==="function"){v=l.message(t,u)}else{v=l.message.replace("%charsTyped%",w).replace("%charsRemaining%",u-w).replace("%charsTotal%",u)}}else{if(l.preText){v+=l.preText}if(!l.showCharsTyped){v+=u-w}else{v+=w}if(l.showMaxLength){v+=l.separator+u}if(l.postText){v+=l.postText}}return v}function k(w,t,u,v){if(v){v.html(r(t.val(),u,(u-w)));if(w>0){if(c(t,l.threshold,u)){p(t,v.removeClass(l.limitReachedClass).addClass(l.warningClass))}else{h(t,v)}}else{p(t,v.removeClass(l.warningClass).addClass(l.limitReachedClass))}}if(l.customMaxAttribute){if(w<0){t.addClass("overmax")}else{t.removeClass("overmax")}}}function g(t){var u=t[0];return a.extend({},(typeof u.getBoundingClientRect==="function")?u.getBoundingClientRect():{width:u.offsetWidth,height:u.offsetHeight},t.offset())}function m(v,x){var z=g(v);if(a.type(l.placement)==="function"){l.placement(v,x,z);return}if(a.isPlainObject(l.placement)){n(l.placement,x);return}var w=v.outerWidth(),y=x.outerWidth(),u=x.width(),t=x.height();if(l.appendToParent){z.top-=v.parent().offset().top;z.left-=v.parent().offset().left}switch(l.placement){case"bottom":x.css({top:z.top+z.height,left:z.left+z.width/2-u/2});break;case"top":x.css({top:z.top-t,left:z.left+z.width/2-u/2});break;case"left":x.css({top:z.top+z.height/2-t/2,left:z.left-u});break;case"right":x.css({top:z.top+z.height/2-t/2,left:z.left+z.width});break;case"bottom-right":x.css({top:z.top+z.height,left:z.left+z.width});break;case"top-right":x.css({top:z.top-t,left:z.left+w});break;case"top-left":x.css({top:z.top-t,left:z.left-y});break;case"bottom-left":x.css({top:z.top+v.outerHeight(),left:z.left-y});break;case"centered-right":x.css({top:z.top+(t/2),left:z.left+w-y-3});break;case"bottom-right-inside":x.css({top:z.top+z.height,left:z.left+z.width-y});break;case"top-right-inside":x.css({top:z.top-t,left:z.left+w-y});break;case"top-left-inside":x.css({top:z.top-t,left:z.left});break;case"bottom-left-inside":x.css({top:z.top+v.outerHeight(),left:z.left});break}}function n(v,u){if(!v||!u){return}var w=["top","bottom","left","right","position"];var t={};a.each(w,function(x,y){var z=l.placement[y];if(typeof z!=="undefined"){t[y]=z}});u.css(t);return}function j(){return l.placement==="bottom-right-inside"||l.placement==="top-right-inside"||typeof l.placement==="function"||(l.message&&typeof l.message==="function")}function f(t){var v=t.attr("maxlength")||l.customMaxAttribute;if(l.customMaxAttribute&&!l.allowOverMax){var u=t.attr(l.customMaxAttribute);if(!v||u<v){v=u}}if(!v){v=t.attr("size")}return v}return this.each(function(){var t=a(this),v,w;a(window).resize(function(){if(w){m(t,w)}});function u(){var x=r(t.val(),v,"0");v=f(t);if(!w){w=a('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(x)}if(t.is("textarea")){t.data("maxlenghtsizex",t.outerWidth());t.data("maxlenghtsizey",t.outerHeight());t.mouseup(function(){if(t.outerWidth()!==t.data("maxlenghtsizex")||t.outerHeight()!==t.data("maxlenghtsizey")){m(t,w)}t.data("maxlenghtsizex",t.outerWidth());t.data("maxlenghtsizey",t.outerHeight())})}if(l.appendToParent){t.parent().append(w);t.parent().css("position","relative")}else{e.append(w)}var y=o(t,f(t));k(y,t,v,w);m(t,w)}if(l.showOnReady){t.ready(function(){u()})}else{t.focus(function(){u()})}t.on("maxlength.reposition",function(){m(t,w)});t.on("destroyed",function(){if(w){w.remove()}});t.on("blur",function(){if(w&&!l.showOnReady&&!l.alwaysShow){w.remove()}});t.on("input",function(){var x=f(t),z=o(t,x),y=true;if(l.validate&&z<0){q(t,x);y=false}else{k(z,t,v,w)}if(j()){m(t,w)}return y})})}})}(jQuery));