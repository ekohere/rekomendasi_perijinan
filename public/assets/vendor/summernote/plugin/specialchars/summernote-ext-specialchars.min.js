(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&module.exports){module.exports=a(require("jquery"))}else{a(window.jQuery)}}}(function(a){a.extend(a.summernote.plugins,{specialchars:function(e){var k=this;var o=a.summernote.ui;var b=e.layoutInfo.editor;var j=e.options;var i=j.langInfo;var h={UP:38,DOWN:40,LEFT:37,RIGHT:39,ENTER:13};var c=15;var d=35;var f,g,m,n=0;var l=["&quot;","&amp;","&lt;","&gt;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&times;","&divide;","&fnof;","&circ;","&tilde;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&Dagger;","&bull;","&hellip;","&permil;","&prime;","&Prime;","&lsaquo;","&rsaquo;","&oline;","&frasl;","&euro;","&image;","&weierp;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&lArr;","&uArr;","&rArr;","&dArr;","&hArr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&loz;","&spades;","&clubs;","&hearts;","&diams;"];e.memo("button.specialCharacter",function(){return o.button({contents:'<i class="fa fa-font fa-flip-vertical">',tooltip:i.specialChar.specialChar,click:function(){k.show()}}).render()});this.makeSpecialCharSetTable=function(){var p=a("<table/>");a.each(l,function(t,u){var r=a("<td/>").addClass("note-specialchar-node");var s=(t%c===0)?a("<tr/>"):p.find("tr").last();var q=o.button({callback:function(v){v.html(u);v.attr("title",u);v.attr("data-value",encodeURIComponent(u));v.css({width:d,"margin-right":"2px","margin-bottom":"2px"})}}).render();r.append(q);s.append(r);if(t%c===0){p.append(s)}});n=p.find("tr").length;m=c;return p};this.initialize=function(){var p=j.dialogsInBody?a(document.body):b;var q='<div class="form-group row-fluid">'+this.makeSpecialCharSetTable()[0].outerHTML+"</div>";this.$dialog=o.dialog({title:i.specialChar.select,body:q}).render().appendTo(p)};this.show=function(){var p=e.invoke("editor.getSelectedText");e.invoke("editor.saveRange");this.showSpecialCharDialog(p).then(function(r){e.invoke("editor.restoreRange");var q=a("<span></span>").html(r)[0];if(q){e.invoke("editor.insertNode",q)}}).fail(function(){e.invoke("editor.restoreRange")})};this.showSpecialCharDialog=function(p){return a.Deferred(function(x){var s=k.$dialog;var t=s.find(".note-specialchar-node");var r=null;var v=[h.UP,h.DOWN,h.LEFT,h.RIGHT];var y=h.ENTER;function u(E){if(!E){return}E.find("button").addClass("active");r=E}function D(E){E.find("button").removeClass("active");r=null}function A(G,E){var F=null;a.each(t,function(K,H){var J=Math.ceil((K+1)/c);var I=((K+1)%c===0)?c:(K+1)%c;if(J===G&&I===E){F=H;return false}});return a(F)}function w(F){var E;var G=t.length%m;if(h.LEFT===F){if(f>1){f=f-1}else{if(g===1&&f===1){f=G;g=n}else{f=m;g=g-1}}}else{if(h.RIGHT===F){if(g===n&&G===f){f=1;g=1}else{if(f<m){f=f+1}else{f=1;g=g+1}}}else{if(h.UP===F){if(g===1&&G<f){g=n-1}else{g=g-1}}else{if(h.DOWN===F){g=g+1}}}}if(g===n&&f>G){g=1}else{if(g>n){g=1}else{if(g<1){g=n}}}E=A(g,f);if(E){D(r);u(E)}}function z(){if(!r){return}x.resolve(decodeURIComponent(r.find("button").attr("data-value")));s.modal("hide")}function C(E){E.preventDefault();var F=E.keyCode;if(F===undefined||F===null){return}if(v.indexOf(F)>-1){if(r===null){u(t.eq(0));f=1;g=1;return}w(F)}else{if(F===y){z()}}return false}D(t);if(p){for(var B=0;B<t.length;B++){var q=a(t[B]);if(q.text()===p){u(q);g=Math.ceil((B+1)/c);f=(B+1)%c}}}o.onDialogShown(k.$dialog,function(){a(document).on("keydown",C);k.$dialog.find("button").tooltip();t.on("click",function(E){E.preventDefault();x.resolve(decodeURIComponent(a(E.currentTarget).find("button").attr("data-value")));o.hideDialog(k.$dialog)})});o.onDialogHidden(k.$dialog,function(){t.off("click");k.$dialog.find("button").tooltip("destroy");a(document).off("keydown",C);if(x.state()==="pending"){x.reject()}});o.showDialog(k.$dialog)})}}})}));